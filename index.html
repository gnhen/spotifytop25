<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Spotify Playlist Generator</title>
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <div id="main"></div>
    <div id="oauth"></div>

    <template id="login">
      <h1>Spotify Playlist Generator</h1>
      <p>
        Login to generate a playlist within your Spotify account containing your
        top 25 songs from the past 4 weeks!
      </p>
      <button
        id="login-button"
        class="mainButton"
        data-bind-onclick="loginWithSpotifyClick();"
      >
        Log in with Spotify
      </button>
    </template>

    <template id="logged-in-template">
      <h1>Spotify Playlist Generator</h1>
      <p>
        Click the button to generate a playlist within your Spotify account
        containing your top 25 songs from the past 4 weeks!
      </p>

      <h2>Logged in as <span data-bind="display_name"></span></h2>
      <img
        width="100"
        data-bind-src="images[0].url"
        data-bind-alt="display_name"
      />
      <table>
        <tr>
          <td>Display name</td>
          <td data-bind="display_name"></td>
        </tr>
        <tr>
          <td>Id</td>
          <td data-bind="id"></td>
        </tr>
      </table>

      <button
        id="generatePlaylistBtn"
        class="mainButton"
        data-bind-onclick="generatePlaylist();"
      >
        Generate Playlist
      </button>
      <br />
      <button
        id="refresh-token-button"
        data-bind-onclick="refreshTokenClick();"
      >
        Refresh Token
      </button>
      <button id="logout-button" data-bind-onclick="logoutClick();">
        Log out
      </button>
    </template>

    <template id="oauth-template">
      <h2>oAuth info</h2>
      <table>
        <tr>
          <td>Access token</td>
          <td data-bind="access_token"></td>
        </tr>
        <tr>
          <td>Refresh token</td>
          <td data-bind="refresh_token"></td>
        </tr>
        <tr>
          <td>Expiration at</td>
          <td data-bind="expires">${getExpirationDate(expires_in)}</td>
        </tr>
      </table>
    </template>

    <script src="script.js" type="module"></script>
  </body>
</html>
